# @package _global_

defaults:
  - override /datamodule: rellis
  - override /module: segmenter
  - override /trainer: gpu
#  - override /transforms@module.sliding: rellis/sliding

callbacks:
    lora:
        activated: False
    finetuning:
        activated: False
    model_checkpoint:
        dirpath: ${hydra:sweep.dir}/${hydra:sweep.subdir}/checkpoints
    calibration:
        freq: 0
    seg_preds_visu:
        freq: 10
    det_preds_visu:
        freq: 0

name: "rellis_segmenter"
            
trainer:
    max_time: "00:11:30:59"
    #fast_dev_run: 1
    limit_train_batches: 1.
    limit_val_batches: 1.
    max_epochs: 100
    log_every_n_steps: 50
    val_check_interval: 1000
    check_val_every_n_epoch: null

datamodule:
    batch_size: 1
    num_workers: 6
    batch_tf: null
    
#module:
    #onehot: True
    #backbone: vit_base_patch16_224 
    
hydra:
  run:
    dir: ${paths.output_dir}/${name}/${now:%Y-%m-%d_%H%M%S}
  sweeper:
    params:
      seed: 1
  sweep:
    dir: ${paths.output_dir}/${name}/${now:%Y-%m-%d_%H%M%S}
